import{b as s}from"./chunk-UE3R3KUH.js";import{W as o,_ as r,da as a,ib as n}from"./chunk-OC6G6XUH.js";var u={production:!0,authApiUrl:"https://cms-auth-ajhzhpffdhb9g0d3.centralus-01.azurewebsites.net/api/auth",contentApiUrl:"http://localhost:5098/api"};var l=class i{constructor(t){this.http=t;this.initializeAuthState()}AUTH_KEY="token";apiUrl=u.authApiUrl;authState=n({user:null,token:null,isAuthenticated:!1});getToken(){return localStorage.getItem(this.AUTH_KEY)}login(t){return this.http.post(`${this.apiUrl}/login?audience=CMS.Service`,t).pipe(o(e=>{this.setAuthState(e.token,e.user)}))}logout(){localStorage.removeItem(this.AUTH_KEY),this.authState.set({user:null,token:null,isAuthenticated:!1})}isAuthenticated(){return this.authState().isAuthenticated}getAuthToken(){return this.authState().token}getLoggedInUser(){return this.authState().user}initializeAuthState(){let t=localStorage.getItem(this.AUTH_KEY)}setAuthState(t,e){console.log("Login successful. Token:",t),localStorage.setItem(this.AUTH_KEY,t),this.authState.set({user:e,token:t,isAuthenticated:!0})}validateAndRefreshToken(t){this.http.post(`${this.apiUrl}/validate-token`,{token:t}).subscribe({next:e=>this.setAuthState(e.token,e.user),error:()=>this.logout()})}static \u0275fac=function(e){return new(e||i)(a(s))};static \u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a,l as b};
